<div class="container-fluid">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h4 class="card-title mb-0">Gestion des Membres</h4>
            <div class="d-flex gap-2">
              <button class="btn btn-primary" (click)="addMember()">Nouveau Membre</button>
              <button class="btn btn-secondary">Générer Liste</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tabs Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link" [class.active]="currentTab === AccountStatus.ACTIVE" (click)="changeTab(AccountStatus.ACTIVE)">
                Membres Actifs
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" [class.active]="currentTab === AccountStatus.EXCLUDED" (click)="changeTab(AccountStatus.EXCLUDED)">
                Membres Exclus
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" [class.active]="currentTab === AccountStatus.DEPARTED" (click)="changeTab(AccountStatus.DEPARTED)">
                Membres Partis
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Members List Table -->
  <div class="row" *ngIf="!isAddingMember && !isEditingMember && !showMemberDetails">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
              <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Profession</th>
                <th>Téléphone</th>
                <th>Groupe Sanguin</th>
                <th>Statut</th>
                <th>Actions</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let member of members">
                <td>{{ member.id }}</td>
                <td>{{ member.lastName }}</td>
                <td>{{ member.firstName }}</td>
                <td>{{ member.profession }}</td>
                <td>{{ member.phoneGabon }}</td>
                <td>{{ member.bloodGroup }}</td>
                <td>
                    <span [class]="getStatusBadgeClass(member.accountStatus)">
                      {{ getDisplayAccountStatus(member.accountStatus) }}
                    </span>
                </td>
                <td>
                  <div class="btn-group">
                    <button class="btn btn-sm btn-info" (click)="viewMemberDetails(member)">
                      <i class="bi bi-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-primary" (click)="editMember(member)">
                      <i class="bi bi-pencil"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" *ngIf="member.accountStatus === AccountStatus.ACTIVE"
                            (click)="updateMemberStatus(member, AccountStatus.EXCLUDED)">
                      <i class="bi bi-x-circle"></i>
                    </button>
                  </div>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add/Edit Member Form -->
  <div class="row" *ngIf="isAddingMember || isEditingMember">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            {{ isAddingMember ? 'Nouveau Membre' : 'Modifier le Membre' }}
          </h5>
        </div>
        <div class="card-body">
          <form [formGroup]="memberForm" (ngSubmit)="saveMember()">
            <!-- Personal Information -->
            <h6 class="mb-3">Informations Personnelles</h6>
            <div class="row mb-4">
              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Nom <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('lastName')?.invalid &&
                                        (memberForm.get('lastName')?.dirty || memberForm.get('lastName')?.touched)"
                       formControlName="lastName">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('lastName')?.invalid &&
                                        (memberForm.get('lastName')?.dirty || memberForm.get('lastName')?.touched)">
                  <div *ngIf="memberForm.get('lastName')?.errors?.['required']">Le nom est requis</div>
                  <div *ngIf="memberForm.get('lastName')?.errors?.['maxlength']">
                    Le nom ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Prénom <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('firstName')?.invalid &&
                                        (memberForm.get('firstName')?.dirty || memberForm.get('firstName')?.touched)"
                       formControlName="firstName">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('firstName')?.invalid &&
                                        (memberForm.get('firstName')?.dirty || memberForm.get('firstName')?.touched)">
                  <div *ngIf="memberForm.get('firstName')?.errors?.['required']">Le prénom est requis</div>
                  <div *ngIf="memberForm.get('firstName')?.errors?.['maxlength']">
                    Le prénom ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Date de naissance <span class="text-danger">*</span>
                </label>
                <input type="date" class="form-control"
                       [class.is-invalid]="memberForm.get('birthDate')?.invalid &&
                                        (memberForm.get('birthDate')?.dirty || memberForm.get('birthDate')?.touched)"
                       formControlName="birthDate">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('birthDate')?.invalid &&
                                        (memberForm.get('birthDate')?.dirty || memberForm.get('birthDate')?.touched)">
                  <div *ngIf="memberForm.get('birthDate')?.errors?.['required']">
                    La date de naissance est requise
                  </div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Lieu de naissance <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('birthPlace')?.invalid &&
                                        (memberForm.get('birthPlace')?.dirty || memberForm.get('birthPlace')?.touched)"
                       formControlName="birthPlace">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('birthPlace')?.invalid &&
                                        (memberForm.get('birthPlace')?.dirty || memberForm.get('birthPlace')?.touched)">
                  <div *ngIf="memberForm.get('birthPlace')?.errors?.['required']">
                    Le lieu de naissance est requis
                  </div>
                  <div *ngIf="memberForm.get('birthPlace')?.errors?.['maxlength']">
                    Le lieu de naissance ne doit pas dépasser 100 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Profession <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('profession')?.invalid &&
                                        (memberForm.get('profession')?.dirty || memberForm.get('profession')?.touched)"
                       formControlName="profession">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('profession')?.invalid &&
                                        (memberForm.get('profession')?.dirty || memberForm.get('profession')?.touched)">
                  <div *ngIf="memberForm.get('profession')?.errors?.['required']">
                    La profession est requise
                  </div>
                  <div *ngIf="memberForm.get('profession')?.errors?.['maxlength']">
                    La profession ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label class="form-label">
                  Groupe Sanguin <span class="text-danger">*</span>
                </label>
                <select class="form-select"
                        [class.is-invalid]="memberForm.get('bloodGroup')?.invalid &&
                                        (memberForm.get('bloodGroup')?.dirty || memberForm.get('bloodGroup')?.touched)"
                        formControlName="bloodGroup">
                  <option *ngFor="let group of bloodGroups" [value]="group">{{ group }}</option>
                </select>
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('bloodGroup')?.invalid &&
                                        (memberForm.get('bloodGroup')?.dirty || memberForm.get('bloodGroup')?.touched)">
                  <div *ngIf="memberForm.get('bloodGroup')?.errors?.['required']">
                    Le groupe sanguin est requis
                  </div>
                </div>
              </div>
            </div>


            <!-- Contact Information -->
            <h6 class="mb-3">Informations de Contact</h6>
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Pays <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('country')?.invalid &&
                                        (memberForm.get('country')?.dirty || memberForm.get('country')?.touched)"
                       formControlName="country">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('country')?.invalid &&
                                        (memberForm.get('country')?.dirty || memberForm.get('country')?.touched)">
                  <div *ngIf="memberForm.get('country')?.errors?.['required']">Le pays est requis</div>
                  <div *ngIf="memberForm.get('country')?.errors?.['maxlength']">
                    Le pays ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Région <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('region')?.invalid &&
                                        (memberForm.get('region')?.dirty || memberForm.get('region')?.touched)"
                       formControlName="region">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('region')?.invalid &&
                                        (memberForm.get('region')?.dirty || memberForm.get('region')?.touched)">
                  <div *ngIf="memberForm.get('region')?.errors?.['required']">La région est requise</div>
                  <div *ngIf="memberForm.get('region')?.errors?.['maxlength']">
                    La région ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Ville <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('city')?.invalid &&
                                        (memberForm.get('city')?.dirty || memberForm.get('city')?.touched)"
                       formControlName="city">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('city')?.invalid &&
                                        (memberForm.get('city')?.dirty || memberForm.get('city')?.touched)">
                  <div *ngIf="memberForm.get('city')?.errors?.['required']">La ville est requise</div>
                  <div *ngIf="memberForm.get('city')?.errors?.['maxlength']">
                    La ville ne doit pas dépasser 50 caractères
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Lieu de résidence <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('residencePlace')?.invalid &&
                            (memberForm.get('residencePlace')?.dirty || memberForm.get('residencePlace')?.touched)"
                       formControlName="residencePlace">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('residencePlace')?.invalid &&
                            (memberForm.get('residencePlace')?.dirty || memberForm.get('residencePlace')?.touched)">
                  <div *ngIf="memberForm.get('residencePlace')?.errors?.['required']">Le lieu de résidence est requis</div>
                  <div *ngIf="memberForm.get('residencePlace')?.errors?.['maxlength']">
                    Le lieu de résidence ne doit pas dépasser 100 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Téléphone au Gabon <span class="text-danger">*</span>
                </label>
                <input type="tel" class="form-control"
                       [class.is-invalid]="memberForm.get('phoneGabon')?.invalid &&
                            (memberForm.get('phoneGabon')?.dirty || memberForm.get('phoneGabon')?.touched)"
                       formControlName="phoneGabon">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('phoneGabon')?.invalid &&
                            (memberForm.get('phoneGabon')?.dirty || memberForm.get('phoneGabon')?.touched)">
                  <div *ngIf="memberForm.get('phoneGabon')?.errors?.['required']">Le numéro de téléphone est requis</div>
                  <div *ngIf="memberForm.get('phoneGabon')?.errors?.['pattern']">Le format du numéro de téléphone est invalide</div>
                  <div *ngIf="memberForm.get('phoneGabon')?.errors?.['minlength']">
                    Le numéro de téléphone doit contenir au moins 8 chiffres
                  </div>
                  <div *ngIf="memberForm.get('phoneGabon')?.errors?.['maxlength']">
                    Le numéro de téléphone ne doit pas dépasser 15 chiffres
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Boîte Postale <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('poBox')?.invalid &&
                            (memberForm.get('poBox')?.dirty || memberForm.get('poBox')?.touched)"
                       formControlName="poBox">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('poBox')?.invalid &&
                            (memberForm.get('poBox')?.dirty || memberForm.get('poBox')?.touched)">
                  <div *ngIf="memberForm.get('poBox')?.errors?.['required']">La boîte postale est requise</div>
                  <div *ngIf="memberForm.get('poBox')?.errors?.['maxlength']">
                    La boîte postale ne doit pas dépasser 20 caractères
                  </div>
                </div>
              </div>

            </div>

            <!-- Family Information -->
            <h6 class="mb-3">Informations Familiales</h6>
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Nom du Père <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('fatherName')?.invalid &&
                                        (memberForm.get('fatherName')?.dirty || memberForm.get('fatherName')?.touched)"
                       formControlName="fatherName">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('fatherName')?.invalid &&
                                        (memberForm.get('fatherName')?.dirty || memberForm.get('fatherName')?.touched)">
                  <div *ngIf="memberForm.get('fatherName')?.errors?.['required']">
                    Le nom du père est requis
                  </div>
                  <div *ngIf="memberForm.get('fatherName')?.errors?.['maxlength']">
                    Le nom du père ne doit pas dépasser 100 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Nom de la Mère <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('motherName')?.invalid &&
                                        (memberForm.get('motherName')?.dirty || memberForm.get('motherName')?.touched)"
                       formControlName="motherName">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('motherName')?.invalid &&
                                        (memberForm.get('motherName')?.dirty || memberForm.get('motherName')?.touched)">
                  <div *ngIf="memberForm.get('motherName')?.errors?.['required']">
                    Le nom de la mère est requis
                  </div>
                  <div *ngIf="memberForm.get('motherName')?.errors?.['maxlength']">
                    Le nom de la mère ne doit pas dépasser 100 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Village au Cameroun <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('villageInCameroon')?.invalid &&
                            (memberForm.get('villageInCameroon')?.dirty || memberForm.get('villageInCameroon')?.touched)"
                       formControlName="villageInCameroon">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('villageInCameroon')?.invalid &&
                            (memberForm.get('villageInCameroon')?.dirty || memberForm.get('villageInCameroon')?.touched)">
                  <div *ngIf="memberForm.get('villageInCameroon')?.errors?.['required']">Le village est requis</div>
                  <div *ngIf="memberForm.get('villageInCameroon')?.errors?.['maxlength']">
                    Le nom du village ne doit pas dépasser 100 caractères
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" formControlName="hasReceivedFatherDeathAid">
                  <label class="form-check-label">Avez-vous déjà reçu l'aide décès d'un père?</label>
                </div>
                <div *ngIf="memberForm.get('hasReceivedFatherDeathAid')?.value">
                  <input type="text" class="form-control" formControlName="fatherDeathAidYear" placeholder="En quelle année?">
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" formControlName="hasReceivedMotherDeathAid">
                  <label class="form-check-label">Avez-vous déjà reçu l'aide décès d'une mère?</label>
                </div>
                <div *ngIf="memberForm.get('hasReceivedMotherDeathAid')?.value">
                  <input type="text" class="form-control" formControlName="motherDeathAidYear" placeholder="En quelle année?">
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Statut Matrimonial <span class="text-danger">*</span>
                </label>
                <select class="form-select"
                        [class.is-invalid]="memberForm.get('maritalStatus')?.invalid &&
               (memberForm.get('maritalStatus')?.dirty || memberForm.get('maritalStatus')?.touched)"
                        formControlName="maritalStatus"
                        (change)="onMaritalStatusChange($event)">
                  <option value="" disabled>Choisir un statut</option>
                  <option *ngFor="let status of maritalStatuses" [value]="status">{{ status }}</option>
                </select>
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('maritalStatus')?.invalid &&
(memberForm.get('maritalStatus')?.dirty || memberForm.get('maritalStatus')?.touched)">
                  <div *ngIf="memberForm.get('maritalStatus')?.errors?.['required']">Le statut matrimonial est requis</div>
                </div>
              </div>

              <!-- Question conditionnelle pour le conjoint -->
              <div class="col-md-6 mb-3" *ngIf="memberForm.get('maritalStatus')?.value === 'Marié'">
                <label class="form-label">
                  Votre conjoint(e) fait-il/elle partie de l'association ? <span class="text-danger">*</span>
                </label>
                <select class="form-select"
                        [class.is-invalid]="memberForm.get('spouseIsMember')?.invalid &&
               (memberForm.get('spouseIsMember')?.dirty || memberForm.get('spouseIsMember')?.touched)"
                        formControlName="spouseIsMember">
                  <option value="" disabled>Choisir une option</option>
                  <option value="true">Oui</option>
                  <option value="false">Non</option>
                </select>
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('spouseIsMember')?.invalid &&
(memberForm.get('spouseIsMember')?.dirty || memberForm.get('spouseIsMember')?.touched)">
                  <div *ngIf="memberForm.get('spouseIsMember')?.errors?.['required']">Une réponse est requise</div>
                </div>
              </div>

            </div>

            <!-- Emergency Contacts -->
            <h6 class="mb-3">Contacts d'Urgence</h6>
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <label class="form-label">
                  Contact d'Urgence <span class="text-danger">*</span>
                </label>
                <input type="tel" class="form-control"
                       [class.is-invalid]="memberForm.get('emergencyContact')?.invalid &&
                             (memberForm.get('emergencyContact')?.dirty || memberForm.get('emergencyContact')?.touched)"
                       formControlName="emergencyContact">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('emergencyContact')?.invalid &&
              (memberForm.get('emergencyContact')?.dirty || memberForm.get('emergencyContact')?.touched)">
                  <div *ngIf="memberForm.get('emergencyContact')?.errors?.['required']">Le contact d'urgence est requis</div>
                  <div *ngIf="memberForm.get('emergencyContact')?.errors?.['pattern']">
                    Le contact d'urgence doit être un numéro de téléphone valide
                  </div>
                  <div *ngIf="memberForm.get('emergencyContact')?.errors?.['minlength']">
                    Le contact d'urgence doit comporter au moins 8 chiffres
                  </div>
                  <div *ngIf="memberForm.get('emergencyContact')?.errors?.['maxlength']">
                    Le contact d'urgence ne doit pas dépasser 15 chiffres
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">Nom du Contact d'Urgence</label>
                <input type="text" class="form-control"
                       [class.is-invalid]="memberForm.get('emergencyContactName')?.invalid &&
                            (memberForm.get('emergencyContactName')?.dirty || memberForm.get('emergencyContactName')?.touched)"
                       formControlName="emergencyContactName">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('emergencyContactName')?.invalid &&
              (memberForm.get('emergencyContactName')?.dirty || memberForm.get('emergencyContactName')?.touched)">
                  <div *ngIf="memberForm.get('emergencyContactName')?.errors?.['required']">Le nom du contact d'urgence est requis</div>
                  <div *ngIf="memberForm.get('emergencyContactName')?.errors?.['maxlength']">Le nom ne doit pas dépasser 100 caractères</div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">Contact au Cameroun</label>
                <input type="tel" class="form-control"
                       [class.is-invalid]="memberForm.get('contactInCameroon')?.invalid &&
                            (memberForm.get('contactInCameroon')?.dirty || memberForm.get('contactInCameroon')?.touched)"
                       formControlName="contactInCameroon">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('contactInCameroon')?.invalid &&
              (memberForm.get('contactInCameroon')?.dirty || memberForm.get('contactInCameroon')?.touched)">
                  <div *ngIf="memberForm.get('contactInCameroon')?.errors?.['required']">Le contact au Cameroun est requis</div>
                  <div *ngIf="memberForm.get('contactInCameroon')?.errors?.['pattern']">Veuillez entrer un numéro valide</div>
                  <div *ngIf="memberForm.get('contactInCameroon')?.errors?.['minlength']">Le numéro doit comporter au moins 8 chiffres</div>
                  <div *ngIf="memberForm.get('contactInCameroon')?.errors?.['maxlength']">Le numéro ne doit pas dépasser 15 chiffres</div>
                </div>
              </div>

            </div>

            <!-- Membership Information -->
            <h6 class="mb-3">Informations d'Adhésion</h6>
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" formControlName="hasResidenceCard">
                  <label class="form-check-label">Avez-vous une carte de séjour?</label>
                </div>
                <div *ngIf="memberForm.get('hasResidenceCard')?.value">
                  <input type="text" class="form-control" formControlName="residenceCardNumber" placeholder="Précisez le numéro">
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" formControlName="hasConsulateCard">
                  <label class="form-check-label">Avez-vous une carte consulaire?</label>
                </div>
                <div *ngIf="memberForm.get('hasConsulateCard')?.value">
                  <input type="text" class="form-control" formControlName="consulateCardNumber" placeholder="Précisez le numéro">
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">Date d'Adhésion</label>
                <input type="date" class="form-control"
                       [class.is-invalid]="memberForm.get('joinDate')?.invalid &&
                            (memberForm.get('joinDate')?.dirty || memberForm.get('joinDate')?.touched)"
                       formControlName="joinDate">
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('joinDate')?.invalid &&
              (memberForm.get('joinDate')?.dirty || memberForm.get('joinDate')?.touched)">
                  <div *ngIf="memberForm.get('joinDate')?.errors?.['required']">La date d'adhésion est requise</div>
                  <div *ngIf="memberForm.get('joinDate')?.errors?.['pattern']">Veuillez entrer une date valide</div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label">Rôle</label>
                <select class="form-select"
                        [class.is-invalid]="memberForm.get('role')?.invalid &&
                             (memberForm.get('role')?.dirty || memberForm.get('role')?.touched)"
                        formControlName="role">
                  <option *ngFor="let role of memberRoles" [value]="role">{{ role }}</option>
                </select>
                <div class="invalid-feedback"
                     *ngIf="memberForm.get('role')?.invalid &&
              (memberForm.get('role')?.dirty || memberForm.get('role')?.touched)">
                  <div *ngIf="memberForm.get('role')?.errors?.['required']">Le rôle est requis</div>
                </div>
              </div>

            </div>

            <!-- Form Actions -->
            <div class="d-flex justify-content-end gap-2">
              <button type="button" class="btn btn-secondary" (click)="cancelEdit()">
                Annuler
              </button>
              <button
                type="button"
                class="btn btn-primary"
                [disabled]="!memberForm.valid"
                (click)="saveMember()">
                {{ isAddingMember ? 'Ajouter' : 'Enregistrer' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Details View -->
  <div class="row" *ngIf="showMemberDetails">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title mb-0">Détails du Membre</h5>
            <button type="button" class="btn btn-close" (click)="closeDetails()"></button>
          </div>
        </div>
        <div class="card-body" *ngIf="selectedMember">
          <!-- Member Details Content -->
          <div class="row">
            <div class="col-md-6">
              <h6>Informations Personnelles</h6>
              <dl class="row">
                <dt class="col-sm-4">Nom Complet</dt>
                <dd class="col-sm-8">{{ selectedMember.lastName }} {{ selectedMember.firstName }}</dd>
                <dt class="col-sm-4">Date de Naissance</dt>
                <dd class="col-sm-8">{{ formatDate(selectedMember.birthDate) }}</dd>
                <dt class="col-sm-4">Lieu de Naissance</dt>
                <dd class="col-sm-8">{{ selectedMember.birthPlace }}</dd>
                <dt class="col-sm-4">Profession</dt>
                <dd class="col-sm-8">{{ selectedMember.profession }}</dd>
                <dt class="col-sm-4">Groupe Sanguin</dt>
                <dd class="col-sm-8">{{ selectedMember.bloodGroup }}</dd>
              </dl>
            </div>
            <div class="col-md-6">
              <h6>Informations de Contact</h6>
              <dl class="row">
                <dt class="col-sm-4">Pays</dt>
                <dd class="col-sm-8">{{ selectedMember.country }}</dd>
                <dt class="col-sm-4">Région</dt>
                <dd class="col-sm-8">{{ selectedMember.region }}</dd>
                <dt class="col-sm-4">Ville</dt>
                <dd class="col-sm-8">{{ selectedMember.city }}</dd>
                <dt class="col-sm-4">Lieu de Résidence</dt>
                <dd class="col-sm-8">{{ selectedMember.residencePlace }}</dd>
                <dt class="col-sm-4">Téléphone</dt>
                <dd class="col-sm-8">{{ selectedMember.phoneGabon }}</dd>
                <dt class="col-sm-4">Boîte Postale</dt>
                <dd class="col-sm-8">{{ selectedMember.poBox || 'Non renseigné' }}</dd>
                <dt class="col-sm-4">Contact d'Urgence</dt>
                <dd class="col-sm-8">{{ selectedMember.emergencyContact }}</dd>
                <dt class="col-sm-4">Nom du Contact d'Urgence</dt>
                <dd class="col-sm-8">{{ selectedMember.emergencyContactName }}</dd>
                <dt class="col-sm-4">Contact au Cameroun</dt>
                <dd class="col-sm-8">{{ selectedMember.contactInCameroon || 'Non renseigné' }}</dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
