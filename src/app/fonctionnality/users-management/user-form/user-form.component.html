<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <div class="mb-3">
    <label for="userName" class="form-label">Nom d'utilisateur</label>
    <input
      type="text"
      class="form-control"
      id="userName"
      formControlName="userName"
      [class.is-invalid]="userForm.get('userName')?.invalid && userForm.get('userName')?.touched">
    <div class="invalid-feedback" *ngIf="userForm.get('userName')?.errors?.['required']">
      Le nom d'utilisateur est requis.
    </div>
    <div class="invalid-feedback" *ngIf="userForm.get('userName')?.errors?.['minlength']">
      Le nom d'utilisateur doit contenir au moins 3 caractères.
    </div>
  </div>

  <div class="mb-3">
    <label for="password" class="form-label">
      {{ user ? 'Nouveau mot de passe (laisser vide pour ne pas modifier)' : 'Mot de passe' }}
    </label>
    <input
      type="password"
      class="form-control"
      id="password"
      formControlName="password"
      [class.is-invalid]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
    <div class="invalid-feedback" *ngIf="userForm.get('password')?.errors?.['required'] && !user">
      Le mot de passe est requis.
    </div>
    <div class="invalid-feedback" *ngIf="userForm.get('password')?.errors?.['minlength']">
      Le mot de passe doit contenir au moins 6 caractères.
    </div>
  </div>

  <div class="mb-3">
    <label for="role" class="form-label">Rôle</label>
    <select
      class="form-select"
      id="role"
      formControlName="role"
      [class.is-invalid]="userForm.get('role')?.invalid && userForm.get('role')?.touched">
      <option value="">Sélectionnez un rôle</option>
      <option *ngFor="let role of memberRoles" [value]="role">
        {{ role }}
      </option>
    </select>
    <div class="invalid-feedback" *ngIf="userForm.get('role')?.errors?.['required']">
      Le rôle est requis.
    </div>
  </div>

  <div class="d-flex justify-content-end gap-2">
    <button type="button" class="btn btn-secondary" (click)="onCancel()">Annuler</button>
    <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">
      {{ user ? 'Modifier' : 'Ajouter' }}
    </button>
  </div>
</form>
